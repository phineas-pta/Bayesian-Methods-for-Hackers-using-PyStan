original TFP code in the book

updated to the more recent TFP syntax

modified to my own liking
